{"version":3,"sources":["../src/Connector.jsx"],"names":["Connector","state","update","props","setActions","setProps","connects","context","appstores","states","actions","connectors","id","uniqueId","setState","component","children","createElement","cloneElement","Component","contextTypes","object","isRequired","defaulProps","propTypes","func","element"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAIMA,S;;;;;;;;;;;;;;4LACJC,K,GAAQ;AACNC,cAAQ;AADF,K;;;;;yCAGa;AAAA;;AAAA,mBACwB,KAAKC,KAD7B;AAAA,UACXC,UADW,UACXA,UADW;AAAA,UACCC,QADD,UACCA,QADD;AAAA,UACWC,QADX,UACWA,QADX;AAAA,+BAEqB,KAAKC,OAAL,CAAaC,SAFlC;AAAA,UAEXC,MAFW,sBAEXA,MAFW;AAAA,UAEHC,OAFG,sBAEHA,OAFG;AAAA,UAEMC,UAFN,sBAEMA,UAFN;;AAGnB,WAAKD,OAAL,GAAeN,aAAaA,WAAWM,OAAX,CAAb,GAAmC,EAAlD;AACA,WAAKE,EAAL,GAAU,iBAAEC,QAAF,CAAW,YAAX,CAAV;AACAF,iBAAW,KAAKC,EAAhB,IAAsB;AACpBV,gBAAQ;AAAA,iBAAM,OAAKY,QAAL,CAAc,EAAEZ,QAAQ,OAAKD,KAAL,CAAWC,MAAX,GAAoB,CAA9B,EAAd,CAAN;AAAA,SADY;AAEpBI,kBAAUA,YAAY;AAFF,OAAtB;AAID;;;2CACsB;AACrB,UAAI,KAAKC,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKC,EAAvC,CAAJ,EAAgD;AAC9C,eAAO,KAAKL,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKC,EAAvC,CAAP;AACD;AACF;;;6BACQ;AAAA,oBAC0C,KAAKT,KAD/C;AAAA,UACCY,SADD,WACCA,SADD;AAAA,UACYC,QADZ,WACYA,QADZ;AAAA,UACsBb,KADtB,WACsBA,KADtB;AAAA,UAC6BE,QAD7B,WAC6BA,QAD7B;AAAA,gCAEqB,KAAKE,OAAL,CAAaC,SAFlC;AAAA,UAECC,MAFD,uBAECA,MAFD;AAAA,UAESC,OAFT,uBAESA,OAFT;;AAGP,UAAIK,SAAJ,EAAe;AACb,eAAO,gBAAME,aAAN,CACLF,SADK,eAEAZ,KAFA,EAEU,KAAKO,OAFf,EAE2BL,SAASI,MAAT,EAAiBC,OAAjB,CAF3B,EAAP;AAID;AACD,UAAIM,QAAJ,EAAc;AACZ,eAAO,gBAAME,YAAN,CACLF,QADK,eAEAb,KAFA,EAEU,KAAKO,OAFf,EAE2BL,SAASI,MAAT,EAAiBC,OAAjB,CAF3B,EAAP;AAID;AACD,aAAO,IAAP;AACD;;;;EAnCqB,gBAAMS,S;;AAqC9BnB,UAAUoB,YAAV,GAAyB;AACvBZ,aAAW,iBAAUa,MAAV,CAAiBC;AADL,CAAzB;AAGAtB,UAAUuB,WAAV,GAAwB;AACtBnB,cAAY,sBAAM,CAAE,CADE;AAEtBC,YAAU,oBAAM,CAAE,CAFI;AAGtBC,YAAU,EAHY;AAItBH,SAAO;AAJe,CAAxB;AAMAH,UAAUwB,SAAV,GAAsB;AACpBpB,cAAY,iBAAUqB,IADF;AAEpBpB,YAAU,iBAAUoB,IAAV,CAAeH,UAFL;AAGpBhB,YAAU,iBAAUe,MAHA;AAIpBN,aAAW,iBAAUU,IAJD;AAKpBT,YAAU,iBAAUU,OALA;AAMpBvB,SAAO,iBAAUkB;AANG,CAAtB;kBAQerB,S","file":"Connector.js","sourcesContent":["import React, { PropTypes } from 'react'\nimport _ from 'lodash'\n\n\n\nclass Connector extends React.Component {\n  state = {\n    update: 0,\n  }\n  componentWillMount() {\n    const { setActions, setProps, connects } = this.props\n    const { states, actions, connectors } = this.context.appstores\n    this.actions = setActions ? setActions(actions) : {}\n    this.id = _.uniqueId('connector_')\n    connectors[this.id] = {\n      update: () => this.setState({ update: this.state.update + 1 }),\n      connects: connects || {},\n    }\n  }\n  componentWillUnmount() {\n    if (this.context.appstores.connectors[this.id]) {\n      delete this.context.appstores.connectors[this.id]\n    }\n  }\n  render() {\n    const { component, children, props, setProps } = this.props\n    const { states, actions } = this.context.appstores\n    if (component) {\n      return React.createElement(\n        component,\n        { ...props, ...this.actions, ...setProps(states, actions) },\n      )\n    }\n    if (children) {\n      return React.cloneElement(\n        children,\n        { ...props, ...this.actions, ...setProps(states, actions) }\n      )\n    }\n    return null\n  }\n}\nConnector.contextTypes = {\n  appstores: PropTypes.object.isRequired,\n}\nConnector.defaulProps = {\n  setActions: () => {},\n  setProps: () => {},\n  connects: {},\n  props: {},\n}\nConnector.propTypes = {\n  setActions: PropTypes.func,\n  setProps: PropTypes.func.isRequired,\n  connects: PropTypes.object,\n  component: PropTypes.func,\n  children: PropTypes.element,\n  props: PropTypes.object,\n}\nexport default Connector\n"]}