{"version":3,"sources":["../src/Connector.jsx"],"names":["Connector","props","setActions","setProps","connects","context","appstores","states","appactions","connectors","state","actions","id","uniqueId","updates","update","setState","component","children","createElement","cloneElement","Component","contextTypes","object","isRequired","defaulProps","propTypes","func","element"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEMA,S;;;;;;;;;;;yCACiB;AAAA;;AAAA,mBACwB,KAAKC,KAD7B;AAAA,UACXC,UADW,UACXA,UADW;AAAA,UACCC,QADD,UACCA,QADD;AAAA,UACWC,QADX,UACWA,QADX;AAAA,+BAEwB,KAAKC,OAAL,CAAaC,SAFrC;AAAA,UAEXC,MAFW,sBAEXA,MAFW;AAAA,UAEHC,UAFG,sBAEHA,UAFG;AAAA,UAESC,UAFT,sBAESA,UAFT;;AAGnB,WAAKC,KAAL,GAAaP,WAAWA,SAASI,MAAT,CAAX,GAA8B,EAA3C;AACA,WAAKI,OAAL,GAAeT,aAAaA,WAAWM,UAAX,CAAb,GAAsC,EAArD;AACA,WAAKI,EAAL,GAAU,iBAAEC,QAAF,CAAW,YAAX,CAAV;AACA,WAAKC,OAAL,GAAe,CAAf;AACAL,iBAAW,KAAKG,EAAhB,IAAsB;AACpBG,gBAAQ,kBAAM;AACZ,iBAAKC,QAAL,CAAcb,SAASI,MAAT,CAAd;AACA,iBAAKO,OAAL;AACD,SAJmB;AAKpBV;AALoB,OAAtB;AAOD;;;2CACsB;AACrB,UAAI,KAAKC,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKG,EAAvC,CAAJ,EAAgD;AAC9C,eAAO,KAAKP,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKG,EAAvC,CAAP;AACD;AACF;;;6BACQ;AAAA,oBACgC,KAAKX,KADrC;AAAA,UACCgB,SADD,WACCA,SADD;AAAA,UACYC,QADZ,WACYA,QADZ;AAAA,UACsBjB,KADtB,WACsBA,KADtB;;AAEP,UAAIgB,SAAJ,EAAe;AACb,eAAO,gBAAME,aAAN,CAAoBF,SAApB,eAAoChB,KAApC,EAA8C,KAAKU,OAAnD,EAA+D,KAAKD,KAApE,EAAP;AACD;AACD,UAAIQ,QAAJ,EAAc;AACZ,eAAO,gBAAME,YAAN,CAAmBF,QAAnB,eAAkCjB,KAAlC,EAA4C,KAAKU,OAAjD,EAA6D,KAAKD,KAAlE,EAAP;AACD;AACD,aAAO,IAAP;AACD;;;;EA9BqB,gBAAMW,S;;AAgC9BrB,UAAUsB,YAAV,GAAyB;AACvBhB,aAAW,iBAAUiB,MAAV,CAAiBC;AADL,CAAzB;AAGAxB,UAAUyB,WAAV,GAAwB;AACtBvB,cAAY,sBAAM,CAAE,CADE;AAEtBC,YAAU,oBAAM,CAAE,CAFI;AAGtBC,YAAU,EAHY;AAItBH,SAAO;AAJe,CAAxB;AAMAD,UAAU0B,SAAV,GAAsB;AACpBxB,cAAY,iBAAUyB,IADF;AAEpBxB,YAAU,iBAAUwB,IAFA;AAGpBvB,YAAU,iBAAUmB,MAHA;AAIpBN,aAAW,iBAAUU,IAJD;AAKpBT,YAAU,iBAAUU,OALA;AAMpB3B,SAAO,iBAAUsB;AANG,CAAtB;kBAQevB,S","file":"Connector.js","sourcesContent":["import React, { PropTypes } from 'react'\nimport _ from 'lodash'\n\nclass Connector extends React.Component {\n  componentWillMount() {\n    const { setActions, setProps, connects } = this.props\n    const { states, appactions, connectors } = this.context.appstores\n    this.state = setProps ? setProps(states) : {}\n    this.actions = setActions ? setActions(appactions) : {}\n    this.id = _.uniqueId('connector_')\n    this.updates = 0\n    connectors[this.id] = {\n      update: () => {\n        this.setState(setProps(states))\n        this.updates++\n      },\n      connects,\n    }\n  }\n  componentWillUnmount() {\n    if (this.context.appstores.connectors[this.id]) {\n      delete this.context.appstores.connectors[this.id]\n    }\n  }\n  render() {\n    const { component, children, props } = this.props\n    if (component) {\n      return React.createElement(component, { ...props, ...this.actions, ...this.state })\n    }\n    if (children) {\n      return React.cloneElement(children, { ...props, ...this.actions, ...this.state })\n    }\n    return null\n  }\n}\nConnector.contextTypes = {\n  appstores: PropTypes.object.isRequired,\n}\nConnector.defaulProps = {\n  setActions: () => {},\n  setProps: () => {},\n  connects: {},\n  props: {},\n}\nConnector.propTypes = {\n  setActions: PropTypes.func,\n  setProps: PropTypes.func,\n  connects: PropTypes.object,\n  component: PropTypes.func,\n  children: PropTypes.element,\n  props: PropTypes.object,\n}\nexport default Connector\n"]}