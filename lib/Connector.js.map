{"version":3,"sources":["../src/Connector.jsx"],"names":["Connector","props","setActions","setProps","connects","context","appstores","states","actions","connectors","state","id","uniqueId","updates","update","setState","component","children","createElement","cloneElement","Component","contextTypes","object","isRequired","defaulProps","propTypes","func","element"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEMA,S;;;;;;;;;;;yCACiB;AAAA;;AAAA,mBACwB,KAAKC,KAD7B;AAAA,UACXC,UADW,UACXA,UADW;AAAA,UACCC,QADD,UACCA,QADD;AAAA,UACWC,QADX,UACWA,QADX;AAAA,+BAEqB,KAAKC,OAAL,CAAaC,SAFlC;AAAA,UAEXC,MAFW,sBAEXA,MAFW;AAAA,UAEHC,OAFG,sBAEHA,OAFG;AAAA,UAEMC,UAFN,sBAEMA,UAFN;;AAGnB,WAAKC,KAAL,GAAaP,WAAWA,SAASI,MAAT,CAAX,GAA8B,EAA3C;AACA,WAAKC,OAAL,GAAeN,aAAaA,WAAWM,OAAX,CAAb,GAAmC,EAAlD;AACA,WAAKG,EAAL,GAAU,iBAAEC,QAAF,CAAW,YAAX,CAAV;AACA,WAAKC,OAAL,GAAe,CAAf;AACAJ,iBAAW,KAAKE,EAAhB,IAAsB;AACpBG,gBAAQ,kBAAM;AACZ,iBAAKC,QAAL,CAAcZ,SAASI,MAAT,CAAd;AACA,iBAAKM,OAAL;AACD,SAJmB;AAKpBT;AALoB,OAAtB;AAOD;;;2CACsB;AACrB,UAAI,KAAKC,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKE,EAAvC,CAAJ,EAAgD;AAC9C,eAAO,KAAKN,OAAL,CAAaC,SAAb,CAAuBG,UAAvB,CAAkC,KAAKE,EAAvC,CAAP;AACD;AACF;;;6BACQ;AAAA,oBACgC,KAAKV,KADrC;AAAA,UACCe,SADD,WACCA,SADD;AAAA,UACYC,QADZ,WACYA,QADZ;AAAA,UACsBhB,KADtB,WACsBA,KADtB;;AAEP,UAAIe,SAAJ,EAAe;AACb,eAAO,gBAAME,aAAN,CAAoBF,SAApB,eAAoCf,KAApC,EAA8C,KAAKO,OAAnD,EAA+D,KAAKE,KAApE,EAAP;AACD;AACD,UAAIO,QAAJ,EAAc;AACZ,eAAO,gBAAME,YAAN,CAAmBF,QAAnB,eAAkChB,KAAlC,EAA4C,KAAKO,OAAjD,EAA6D,KAAKE,KAAlE,EAAP;AACD;AACD,aAAO,IAAP;AACD;;;;EA9BqB,gBAAMU,S;;AAgC9BpB,UAAUqB,YAAV,GAAyB;AACvBf,aAAW,iBAAUgB,MAAV,CAAiBC;AADL,CAAzB;AAGAvB,UAAUwB,WAAV,GAAwB;AACtBtB,cAAY,sBAAM,CAAE,CADE;AAEtBC,YAAU,oBAAM,CAAE,CAFI;AAGtBC,YAAU,EAHY;AAItBH,SAAO;AAJe,CAAxB;AAMAD,UAAUyB,SAAV,GAAsB;AACpBvB,cAAY,iBAAUwB,IADF;AAEpBvB,YAAU,iBAAUuB,IAFA;AAGpBtB,YAAU,iBAAUkB,MAHA;AAIpBN,aAAW,iBAAUU,IAJD;AAKpBT,YAAU,iBAAUU,OALA;AAMpB1B,SAAO,iBAAUqB;AANG,CAAtB;kBAQetB,S","file":"Connector.js","sourcesContent":["import React, { PropTypes } from 'react'\nimport _ from 'lodash'\n\nclass Connector extends React.Component {\n  componentWillMount() {\n    const { setActions, setProps, connects } = this.props\n    const { states, actions, connectors } = this.context.appstores\n    this.state = setProps ? setProps(states) : {}\n    this.actions = setActions ? setActions(actions) : {}\n    this.id = _.uniqueId('connector_')\n    this.updates = 0\n    connectors[this.id] = {\n      update: () => {\n        this.setState(setProps(states))\n        this.updates++\n      },\n      connects,\n    }\n  }\n  componentWillUnmount() {\n    if (this.context.appstores.connectors[this.id]) {\n      delete this.context.appstores.connectors[this.id]\n    }\n  }\n  render() {\n    const { component, children, props } = this.props\n    if (component) {\n      return React.createElement(component, { ...props, ...this.actions, ...this.state })\n    }\n    if (children) {\n      return React.cloneElement(children, { ...props, ...this.actions, ...this.state })\n    }\n    return null\n  }\n}\nConnector.contextTypes = {\n  appstores: PropTypes.object.isRequired,\n}\nConnector.defaulProps = {\n  setActions: () => {},\n  setProps: () => {},\n  connects: {},\n  props: {},\n}\nConnector.propTypes = {\n  setActions: PropTypes.func,\n  setProps: PropTypes.func,\n  connects: PropTypes.object,\n  component: PropTypes.func,\n  children: PropTypes.element,\n  props: PropTypes.object,\n}\nexport default Connector\n"]}